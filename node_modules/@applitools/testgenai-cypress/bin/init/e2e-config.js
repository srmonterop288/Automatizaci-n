"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const ts_morph_1 = require("ts-morph");
const helpers_1 = require("./helpers");
exports.default = (cypressRoot) => {
    const project = new ts_morph_1.Project({});
    const e2eJsPath = `${cypressRoot}/cypress/support/e2e.js`;
    const e2eTsPath = `${cypressRoot}/cypress/support/e2e.ts`;
    let sourceFile = project.addSourceFileAtPathIfExists(e2eJsPath);
    if (!sourceFile) {
        sourceFile = project.addSourceFileAtPathIfExists(e2eTsPath);
    }
    if (!sourceFile)
        throw new Error('e2e.js or e2e.ts not found');
    const moduleImportPath = '@applitools/testgenai-cypress/dist/commands';
    (0, helpers_1.addImport)(sourceFile, {
        moduleSpecifier: moduleImportPath
    });
    sourceFile.saveSync();
};
